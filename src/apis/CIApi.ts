/* tslint:disable */
/* eslint-disable */
/**
 * SourceCraft API
 * Bleeding edge of Public REST API of SourceCraft
 *
 * The version of the OpenAPI document: 0.0.1
 * Contact: info@sourcecraft.dev
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */

import * as runtime from "../runtime";
import type { ApiErrorResponse, RunCIBody, RunCIWorkflowResponse } from "../models/index";
import {
    ApiErrorResponseFromJSON,
    ApiErrorResponseToJSON,
    RunCIBodyFromJSON,
    RunCIBodyToJSON,
    RunCIWorkflowResponseFromJSON,
    RunCIWorkflowResponseToJSON,
} from "../models/index";

export interface RunWorkflowRequest {
    orgSlug: string;
    repoSlug: string;
    workflowName: string;
    runCIBody: RunCIBody;
}

export interface RunWorkflowByIDRequest {
    repoId: string;
    workflowName: string;
    runCIBody: RunCIBody;
}

/**
 * CIApi - interface
 *
 * @export
 * @interface CIApiInterface
 */
export interface CIApiInterface {
    /**
     * Method is deprecated, please use POST /{org_slug}/{repo_slug}/cicd/runs instead
     * @summary Run Workflow in Repository
     * @param {string} orgSlug
     * @param {string} repoSlug
     * @param {string} workflowName
     * @param {RunCIBody} runCIBody
     * @param {*} [options] Override http request option.
     * @deprecated
     * @throws {RequiredError}
     * @memberof CIApiInterface
     */
    runWorkflowRaw(
        requestParameters: RunWorkflowRequest,
        initOverrides?: RequestInit | runtime.InitOverrideFunction
    ): Promise<runtime.ApiResponse<RunCIWorkflowResponse>>;

    /**
     * Method is deprecated, please use POST /{org_slug}/{repo_slug}/cicd/runs instead
     * Run Workflow in Repository
     * @deprecated
     */
    runWorkflow(
        requestParameters: RunWorkflowRequest,
        initOverrides?: RequestInit | runtime.InitOverrideFunction
    ): Promise<RunCIWorkflowResponse>;

    /**
     * Method is deprecated, please use POST /repos/by-id/{repo_id}/cicd/runs instead
     * @summary Run Workflow in Repository (By Repo ID)
     * @param {string} repoId
     * @param {string} workflowName
     * @param {RunCIBody} runCIBody
     * @param {*} [options] Override http request option.
     * @deprecated
     * @throws {RequiredError}
     * @memberof CIApiInterface
     */
    runWorkflowByIDRaw(
        requestParameters: RunWorkflowByIDRequest,
        initOverrides?: RequestInit | runtime.InitOverrideFunction
    ): Promise<runtime.ApiResponse<RunCIWorkflowResponse>>;

    /**
     * Method is deprecated, please use POST /repos/by-id/{repo_id}/cicd/runs instead
     * Run Workflow in Repository (By Repo ID)
     * @deprecated
     */
    runWorkflowByID(
        requestParameters: RunWorkflowByIDRequest,
        initOverrides?: RequestInit | runtime.InitOverrideFunction
    ): Promise<RunCIWorkflowResponse>;
}

/**
 *
 */
export class CIApi extends runtime.BaseAPI implements CIApiInterface {
    /**
     * Method is deprecated, please use POST /{org_slug}/{repo_slug}/cicd/runs instead
     * Run Workflow in Repository
     * @deprecated
     */
    async runWorkflowRaw(
        requestParameters: RunWorkflowRequest,
        initOverrides?: RequestInit | runtime.InitOverrideFunction
    ): Promise<runtime.ApiResponse<RunCIWorkflowResponse>> {
        if (requestParameters["orgSlug"] == null) {
            throw new runtime.RequiredError(
                "orgSlug",
                'Required parameter "orgSlug" was null or undefined when calling runWorkflow().'
            );
        }

        if (requestParameters["repoSlug"] == null) {
            throw new runtime.RequiredError(
                "repoSlug",
                'Required parameter "repoSlug" was null or undefined when calling runWorkflow().'
            );
        }

        if (requestParameters["workflowName"] == null) {
            throw new runtime.RequiredError(
                "workflowName",
                'Required parameter "workflowName" was null or undefined when calling runWorkflow().'
            );
        }

        if (requestParameters["runCIBody"] == null) {
            throw new runtime.RequiredError(
                "runCIBody",
                'Required parameter "runCIBody" was null or undefined when calling runWorkflow().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters["Content-Type"] = "application/json";

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("bearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/{org_slug}/{repo_slug}/ci_workflows/{workflow_name}/trigger`;
        urlPath = urlPath.replace(
            `{${"org_slug"}}`,
            encodeURIComponent(String(requestParameters["orgSlug"]))
        );
        urlPath = urlPath.replace(
            `{${"repo_slug"}}`,
            encodeURIComponent(String(requestParameters["repoSlug"]))
        );
        urlPath = urlPath.replace(
            `{${"workflow_name"}}`,
            encodeURIComponent(String(requestParameters["workflowName"]))
        );

        const response = await this.request(
            {
                path: urlPath,
                method: "POST",
                headers: headerParameters,
                query: queryParameters,
                body: RunCIBodyToJSON(requestParameters["runCIBody"]),
            },
            initOverrides
        );

        return new runtime.JSONApiResponse(response, (jsonValue) =>
            RunCIWorkflowResponseFromJSON(jsonValue)
        );
    }

    /**
     * Method is deprecated, please use POST /{org_slug}/{repo_slug}/cicd/runs instead
     * Run Workflow in Repository
     * @deprecated
     */
    async runWorkflow(
        requestParameters: RunWorkflowRequest,
        initOverrides?: RequestInit | runtime.InitOverrideFunction
    ): Promise<RunCIWorkflowResponse> {
        const response = await this.runWorkflowRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Method is deprecated, please use POST /repos/by-id/{repo_id}/cicd/runs instead
     * Run Workflow in Repository (By Repo ID)
     * @deprecated
     */
    async runWorkflowByIDRaw(
        requestParameters: RunWorkflowByIDRequest,
        initOverrides?: RequestInit | runtime.InitOverrideFunction
    ): Promise<runtime.ApiResponse<RunCIWorkflowResponse>> {
        if (requestParameters["repoId"] == null) {
            throw new runtime.RequiredError(
                "repoId",
                'Required parameter "repoId" was null or undefined when calling runWorkflowByID().'
            );
        }

        if (requestParameters["workflowName"] == null) {
            throw new runtime.RequiredError(
                "workflowName",
                'Required parameter "workflowName" was null or undefined when calling runWorkflowByID().'
            );
        }

        if (requestParameters["runCIBody"] == null) {
            throw new runtime.RequiredError(
                "runCIBody",
                'Required parameter "runCIBody" was null or undefined when calling runWorkflowByID().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters["Content-Type"] = "application/json";

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("bearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/repos/id:{repo_id}/ci_workflows/{workflow_name}/trigger`;
        urlPath = urlPath.replace(
            `{${"repo_id"}}`,
            encodeURIComponent(String(requestParameters["repoId"]))
        );
        urlPath = urlPath.replace(
            `{${"workflow_name"}}`,
            encodeURIComponent(String(requestParameters["workflowName"]))
        );

        const response = await this.request(
            {
                path: urlPath,
                method: "POST",
                headers: headerParameters,
                query: queryParameters,
                body: RunCIBodyToJSON(requestParameters["runCIBody"]),
            },
            initOverrides
        );

        return new runtime.JSONApiResponse(response, (jsonValue) =>
            RunCIWorkflowResponseFromJSON(jsonValue)
        );
    }

    /**
     * Method is deprecated, please use POST /repos/by-id/{repo_id}/cicd/runs instead
     * Run Workflow in Repository (By Repo ID)
     * @deprecated
     */
    async runWorkflowByID(
        requestParameters: RunWorkflowByIDRequest,
        initOverrides?: RequestInit | runtime.InitOverrideFunction
    ): Promise<RunCIWorkflowResponse> {
        const response = await this.runWorkflowByIDRaw(requestParameters, initOverrides);
        return await response.value();
    }
}
